"""Prompt templates for style analysis."""

CHUNK_ANALYSIS_SYSTEM = """Ты — эксперт по стилистическому анализу текстов на русском языке. \
Тебе будет предоставлена подборка статей из игрового блога. Твоя задача — провести \
детальный стилистический анализ этих статей по 5 измерениям."""

CHUNK_ANALYSIS_USER = """\
Проанализируй следующие статьи из игрового блога по 5 измерениям стиля. \
Приведи конкретные примеры из текстов (цитаты).

## Измерения анализа

### 1. Лексика и словарный запас
- Характерные слова и выражения
- Жаргон, сленг, авторские неологизмы
- Уровень формальности
- Заимствования и калькирование

### 2. Тон и голос
- Эмоциональная окраска (восторженный / сдержанный / ироничный / etc.)
- Отношение к читателю (обращение, дистанция)
- Отношение к предмету (критика, восхищение, нейтральность)
- Юмор: типы, частота, примеры

### 3. Структура и ритм
- Средняя длина предложений
- Вариативность длины (короткие акценты vs длинные описания)
- Использование списков, подзаголовков
- Абзацная структура

### 4. Форматирование и типографика
- Использование bold/italic и для чего
- Заголовки: стиль формулировки
- Цитаты, сноски, отсылки
- Характерные пунктуационные паттерны (тире, многоточия, восклицательные)

### 5. Контент-паттерны
- Как начинаются статьи (хуки, интро)
- Как заканчиваются статьи (выводы, призывы)
- Типичные переходы между секциями
- Личные мнения vs факты: баланс и подача

---

## Статьи для анализа

{articles_text}

---

Дай подробный структурированный анализ. Используй конкретные цитаты из текстов. \
Отметь как повторяющиеся паттерны, так и вариации стиля."""


SYNTHESIS_SYSTEM = """Ты — эксперт по стилистике и редакторскому делу. \
Тебе предоставлены множественные частичные анализы стиля одного и того же блога. \
Твоя задача — синтезировать их в единый, подробный style guide."""

SYNTHESIS_USER = """\
Ниже приведены {n_chunks} частичных стилистических анализов статей из одного игрового блога. \
Синтезируй их в единый подробный style guide.

## Требования к style guide

1. **Общая характеристика голоса** — 2-3 предложения, суммирующие стиль
2. **Лексика** — характерные слова, запрещённые/нетипичные конструкции, уровень формальности
3. **Тон и голос** — с конкретными примерами типичных формулировок
4. **Структура текста** — как строятся статьи, абзацы, предложения
5. **Форматирование** — правила использования bold, italic, заголовков, списков
6. **Контент-паттерны** — интро, заключения, переходы, баланс мнений/фактов
7. **DO / DON'T** — конкретные правила (что делать / чего избегать)
8. **Примеры характерных фраз** — 15-20 типичных выражений, оборотов

Каждый раздел должен содержать конкретные русскоязычные примеры из анализов.

Style guide должен быть достаточно подробным, чтобы другой автор (или LLM) мог \
воспроизвести стиль блога при написании нового текста.

---

## Частичные анализы

{analyses_text}

---

Сгенерируй style guide в формате Markdown. Будь конкретным, избегай абстрактных описаний."""


SYNTHESIS_JSON_USER = """\
Преобразуй следующий style guide в структурированный JSON формат.

## Style guide

{style_guide_md}

---

Верни JSON со следующей структурой:
```json
{{
  "voice_summary": "краткое описание голоса (2-3 предложения)",
  "formality_level": "informal/semi-formal/formal",
  "tone": ["список характеристик тона"],
  "lexicon": {{
    "characteristic_words": ["слова и фразы"],
    "avoid_words": ["слова, которые не используются"],
    "slang_frequency": "low/medium/high"
  }},
  "structure": {{
    "avg_sentence_length": "short/medium/long",
    "paragraph_style": "описание",
    "uses_subheadings": true/false,
    "uses_lists": true/false
  }},
  "formatting": {{
    "bold_usage": "описание",
    "italic_usage": "описание",
    "punctuation_patterns": ["паттерны"]
  }},
  "content_patterns": {{
    "intro_style": "описание",
    "outro_style": "описание",
    "opinion_fact_balance": "описание"
  }},
  "rules": {{
    "do": ["правила — что делать"],
    "dont": ["правила — чего избегать"]
  }},
  "example_phrases": ["15-20 характерных фраз"]
}}
```

Верни ТОЛЬКО валидный JSON, без комментариев и markdown-обёртки."""
